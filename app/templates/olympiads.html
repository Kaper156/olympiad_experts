{% extends 'base.html' %}
{% set title = title or 'Олимпиады' %}
{% macro editor(form, link='olympiads', args=[], new=False) -%}
    <form action="{{ url_for(link, **args) }}" method="post">
        <table>
            {% if new %}
                <h3>Добавление элемента</h3>
            {% else %}
                <h3>Изменение элемента</h3>
            {% endif %}


            {% for field in form if field.widget.input_type != 'hidden' %}
                <tr>
                    <td>{{ field.label }}:</td>
                    <td>{{ field() }}</td>
                </tr>
            {% endfor %}
            <tr>
                <td>{{ form.hidden_tag() }}</td>
                <td><input type="submit" value="{{ btn_text }}" class="btn"/></td>
            </tr>
        </table>
    </form>
{%- endmacro %}
{% block content %}
    <div class="olympiads">
        <div class="control-panel">
            <h4 class="text-centered">Управление</h4>
            <a href="#" class="btn right" id="btn-toggle">Добавить</a>
        </div>
        <div class="editor" id="editor">
            {{ editor(form, 'olympiads', {}, new=True) }}
        </div>

        {% for olympiad, form in olympiads %}
            <div class="object-line">
                <div class="info">
                    <p class="field">Название: <span class="value">{{ olympiad.name }}</span></p>

                    <p class="field">Дата: <span class="value">{{ olympiad.date }}</span></p>

                    <p class="field">Описание: <span class="value">{{ olympiad.description }}</span></p>
                </div>
                <div class="buttons">
                    <span class="btn-group">
                        <a id="delete-{{ olympiad.id }}" href="{{ url_for('olympiads') }}" class="btn">
                            <i class="icon_close_alt big"></i>Удалить
                        </a>
                        <a href="#" class="btn-toggle btn" about="{{ olympiad.id }}">
                            <i class="icon_pencil-edit big"></i>Редактировать
                        </a>
                    </span>
                </div>
                <div class="editor" id="editor-{{ olympiad.id }}">
                    {{ editor(form, link='edit_olympiads', args={'id': olympiad.id}) }}
                </div>
            </div>
            <br>
        {% endfor %}
    </div>
{% endblock %}

