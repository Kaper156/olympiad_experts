{% extends 'child.html' %}

{% set title = title or 'Критерии' %}

{% macro adder_aspect(form, args) %}
	{{ editor(form=form, end_point='aspect_add', args=args, title='Добавление критерия') }}
{% endmacro %}

{% macro editor_aspect(form, args) %}
	{{ editor(form=form, end_point='aspect_edit', args=args, id='modal-editor-' ~ args['id'],
	          title='Изменение критерия', btn_text='Изменить') }}
{% endmacro %}

{% macro delete_aspect(args) -%}
	{% set link = 'aspect_delete' %}
	{% set attr_id = 'modal-delete-'~args['id'] %}
	{% set title = 'Вы действительно хотите удалить этот подмодуль?' %}
	{% set body = '<p>Пути назад нет.</p>' -%}
	{{ delete_object(title=title, body=body, attr_id=attr_id, link=link, args=args) }}
{%- endmacro %}

{% macro iter_head() -%}
	<th>#</th>
	<th>Название</th>
	<th>Максимум баллов</th>
	<th>Описание</th>
{%- endmacro %}

{% macro iter_aspect(aspect) %}
	<td>{{ aspect.id }}</td>
	<td>{{ aspect.name }}</td>
	<td>{{ aspect.max_balls }}</td>
	<td>{{ aspect.description }}</td>
{% endmacro %}

{% block content %}
	{{ content(end_point='aspect', form=form, parent_id=parent_id,
			   macro_add=adder_aspect,
			   macro_edit=editor_aspect,
			   macro_delete=delete_aspect,
			   macro_table_head=iter_head,
			   macro_row_object=iter_aspect,
			   maximum_balls=maximum_balls) }}
{% endblock %}
